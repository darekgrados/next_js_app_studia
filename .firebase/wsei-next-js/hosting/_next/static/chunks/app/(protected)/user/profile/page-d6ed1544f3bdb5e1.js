(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[864],{828:(e,t,s)=>{Promise.resolve().then(s.bind(s,7050))},7050:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(5155),l=s(4565),i=s(1788),o=s(2115),r=s(9606),d=s(7982),n=s(7058);function u(){let{user:e}=(0,i.A)(),t=(0,l.xI)(),[s,u]=(0,o.useState)(!0),[c,p]=(0,o.useState)(""),{register:m,setValue:x,handleSubmit:g,formState:{errors:y}}=(0,r.mN)({defaultValues:{displayName:(null==e?void 0:e.displayName)||"".concat(null==e?void 0:e.email),email:(null==e?void 0:e.email)||"",street:"",city:"",zipCode:"",photoURL:(null==e?void 0:e.photoURL)||""}});(0,o.useEffect)(()=>{(async()=>{try{if(null==e?void 0:e.uid){let t=await (0,n.x7)((0,n.H9)(d.db,"users",null==e?void 0:e.uid));if(t.exists()){let e=t.data().address;x("street",(null==e?void 0:e.street)||""),x("city",(null==e?void 0:e.city)||""),x("zipCode",(null==e?void 0:e.zipCode)||"")}}}catch(e){console.error("Error getting document:",e),p("Wystąpił błąd podczas pobierania danych z Firestore.")}finally{u(!1)}})()},[null==e?void 0:e.uid,x]);let b=async s=>{try{await (0,l.r7)(t.currentUser,{displayName:s.displayName,photoURL:s.photoURL}),console.log("Profil zaktualizowany"),await (0,n.BN)((0,n.H9)(d.db,"users",null==e?void 0:e.uid),{address:{street:s.street,city:s.city,zipCode:s.zipCode}}),console.log("Dane uzytkownika zaktualizowane")}catch(e){console.error("Wystąpił błąd podczas aktualizacji danych: ",e),"permission-denied"===e.code?p("Brak uprawnień do zapisu danych w Firestore."):p("Wystąpił błąd: "+e.message)}};return(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-800",children:(0,a.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-8 max-w-md w-full",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Profil"}),c&&(0,a.jsx)("div",{className:"alert alert-error mb-4 bg-red-100 text-red-600 p-4 rounded",children:(0,a.jsx)("p",{children:c})}),(0,a.jsxs)("form",{className:"space-y-6",onSubmit:g(b),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Imię"}),(0,a.jsx)("input",{type:"text",className:"input w-full border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Display Name",...m("displayName",{required:"Nazwa użytkownika jest wymagana",maxLength:{value:50,message:"Nazwa użytkownika jest za długa"}}),disabled:s}),y.displayName&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:y.displayName.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Email"}),(0,a.jsx)("input",{type:"email",className:"input w-full border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",readOnly:!0,value:(null==e?void 0:e.email)||""})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Ulica"}),(0,a.jsx)("input",{type:"text",className:"input w-full border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Street",...m("street"),disabled:s})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Miasto"}),(0,a.jsx)("input",{type:"text",className:"input w-full border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"City",...m("city"),disabled:s})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Kod pocztowy"}),(0,a.jsx)("input",{type:"text",className:"input w-full border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Zip Code",...m("zipCode",{maxLength:{value:6,message:"Kod pocztowy jest za długi"}}),disabled:s}),y.zipCode&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:y.zipCode.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Profilowe"}),(0,a.jsx)("input",{type:"text",className:"input w-full border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Profile Photo URL",...m("photoURL",{pattern:{value:/^(https?:\/\/.*\.(?:png|jpg|jpeg|gif|svg))$/,message:"Niepoprawny adres URL zdjęcia"}})}),y.photoURL&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:y.photoURL.message})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 rounded-lg transition duration-200 mt-4",disabled:s,children:s?"Loading...":"Save"})]})]})})}},1788:(e,t,s)=>{"use strict";s.d(t,{A:()=>n,AuthProvider:()=>d});var a=s(5155),l=s(2115),i=s(4565),o=s(7982);let r=(0,l.createContext)(),d=e=>{let{children:t}=e,[s,d]=(0,l.useState)(null),[n,u]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let e=(0,i.hg)(o.j,e=>{d(e),u(!1)});return()=>e()},[]),(0,a.jsx)(r.Provider,{value:{user:s,loading:n},children:t})},n=()=>(0,l.useContext)(r)},7982:(e,t,s)=>{"use strict";s.d(t,{db:()=>d,j:()=>r});var a=s(9904),l=s(4565),i=s(7058);let o=(0,a.Wp)({apiKey:"AIzaSyBKsZhbYiJH74_JYLU-BpWLRZGNUssKa3E",authDomain:"wsei-next-js.firebaseapp.com",projectId:"wsei-next-js",storageBucket:"wsei-next-js.firebasestorage.app",messagingSenderId:"1081961707183",appId:"1:1081961707183:web:c61f8f5fc4449da1eb065a"}),r=(0,l.xI)(o),d=(0,i.aU)(o)}},e=>{var t=t=>e(e.s=t);e.O(0,[992,782,861,606,441,517,358],()=>t(828)),_N_E=e.O()}]);